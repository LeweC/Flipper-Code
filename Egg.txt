+--------------------------------------------------------------------+
|
|
+--------------------------------------------------------------------+

+--------------------------------------------------------------------+
|	Setup
|	XL430 		--> flex/extend fingers
|	XL330 ID 1	--> flex/extend thumb
|	XL330 ID 2	--> rotate fingers
|
+--------------------------------------------------------------------+

#INIT
	do
		2 -->xNUM
		1 2 -->xENABLE
		UpdateValues!
;

#HOME
	after 
		INIT
	do 
		Rotate 
	until 
		2 xVELOCITY abs 0.01 <
;

#READY 
	after 
		HOME
	do 
		0 2 -->xMOTOR
;

#GRAB
;


:Rotate
	1 -->motorDirection 
	50 -->motorSpeed
	motorDirection motorSpeed * 2 -->xMOTOR
;

:UpdateAcc 
	2 xVELOCITY motorDirection * -->currentVelocity
	currentVelocity oldVelocity - 100 * -->ACCELERATION
	currentVelocity -->oldVelocity
;

:UpdateValues
	UpdateAcc
;

+--------------------------------------------------------------------+
| Threshold für Berührung
| zwischen -100 und -250
| -100 scheint guter Kandidat 
+--------------------------------------------------------------------+

:STOP_REACHED_ACC
	ACCELERATION -100 <
;

:STOP_REACHED
	2 xCURRENT abs smoothCurrent - 0.1 * smoothCurrent + -->smoothCurrent
	smoothCurrent 17 >
;

